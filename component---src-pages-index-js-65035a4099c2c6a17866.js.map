{"version":3,"file":"component---src-pages-index-js-65035a4099c2c6a17866.js","mappings":"4KA0DA,UAjDkB,WAYhB,MAA0BA,EAAAA,SAAe,IAAlCC,EAAP,KAAcC,EAAd,KAEMC,EAAc,SAAdA,EAAeC,IACnBC,EAAAA,EAAAA,IAjBc,GAiBND,EAjBM,IAiBuBE,MAAK,YAAe,IAAZC,EAAW,EAAXA,KAC3CL,GAAS,SAAAD,GAAK,wBAAQA,IAAR,OAAkBM,EAAKA,UACjCA,EAAKC,MAnBG,GAmBMJ,EAnBN,IAoBVD,EAAYC,EAAO,OAiBzB,OALAJ,EAAAA,WAAgB,WACdE,EAAS,IACTC,EAAY,KACX,IAGD,4BACE,qCACA,uBAAKM,UAAU,cAEXR,EAAMS,KAAI,SAACC,EAAMC,GAAP,OACR,gBAAC,IAAD,CAAaC,OAAQC,EAAAA,GAAQC,UAAWJ,EAAMK,IAAKJ","sources":["webpack://pla-s-tools/./src/pages/index.js"],"sourcesContent":["import { graphql, useStaticQuery } from \"gatsby\";\nimport * as React from \"react\";\nimport AddressCard from \"../component/address-card\";\nimport { getList, setApiUrl, deleteItem } from \"../helpers\";\n\nimport { SENDER } from \"../helpers\";\n\nconst PAGE_SIZE = 25;\n// markup\nconst IndexPage = () => {\n\n  // const apiData = useStaticQuery(graphql`\n  //   query MyQuery {\n  //     api {\n  //       appScriptUrl\n  //     }\n  //   }\n  // `);\n\n  // setApiUrl(apiData.api.appScriptUrl);\n\n  const [items, setItems] = React.useState([]);\n\n  const getAllItems = (page) => {\n    getList(page * PAGE_SIZE, PAGE_SIZE).then(({ data }) => {\n      setItems(items => [...items, ...data.data]);\n      if (data.total > (page * PAGE_SIZE) + PAGE_SIZE) {\n        getAllItems(page + 1);\n      }\n    });\n  };\n\n  const deleteAllItems = () => {\n    Promise.all(items.map(item => deleteItem(item.id))).then(() => {\n      setItems([]);\n      getAllItems(0);\n    });\n  };\n\n  React.useEffect(() => {\n    setItems([]);\n    getAllItems(0);\n  }, []);\n\n  return (\n    <main>\n      <title>Form</title>\n      <div className=\"print-page\">\n        {\n          items.map((item, idx) => (\n            <AddressCard sender={SENDER} recipient={item} key={idx} />\n          ))\n        }\n      </div>\n    </main>\n  );\n};\n\nexport default IndexPage;\n"],"names":["React","items","setItems","getAllItems","page","getList","then","data","total","className","map","item","idx","sender","SENDER","recipient","key"],"sourceRoot":""}