{"version":3,"file":"component---src-pages-form-js-5998ac9a2b685270e817.js","mappings":"kKAiFA,UA5EiB,WAYf,MAAwBA,EAAAA,SAAe,IAAhCC,EAAP,KAAaC,EAAb,KACA,EAAwBF,EAAAA,SAAe,CAAEG,GAAI,KAAMC,KAAM,GAAIC,QAAS,GAAIC,KAAM,KAAzEC,EAAP,KAAaC,EAAb,KAEMC,EAAc,SAACR,GAEnB,IAAIS,EAAOT,EAOLU,GADND,GAHAA,GAFAA,EAAOA,EAAKE,QAAQ,qGAAsG,KAE9GA,QAAQ,2BAA4B,KAGpCC,MAAM,QAAQC,QAAO,SAAAC,GAAC,OAAIA,EAAEC,OAAS,KAAGC,KAAK,OAClCJ,MAAM,QACvBT,EAAOO,EAAUO,QACjBZ,EAAOK,EAAUQ,MAEvB,MAAO,CAAEf,KAAAA,EAAMC,QADCM,EAAUM,KAAK,MAAML,QAAQ,UAAW,KAChCN,KAAAA,IAGpBc,EAAY,WAChBlB,EAAQ,IACRM,EAAQ,CAAEL,GAAI,KAAMC,KAAM,GAAIC,QAAS,GAAIC,KAAM,MAqBnD,OAHAN,EAAAA,WAAgB,WACdqB,QAAQC,IAAIf,KACX,CAACA,IAEF,2BACE,uBAAKgB,UAAU,sCACb,qBAAGC,KAAK,aAAaD,UAAU,mBAA/B,kBAEF,uBAAKA,UAAU,cACb,2BACE,4BAAUE,MAAOxB,EAAMyB,SAAU,SAACC,GAAD,OAAOzB,EAAQyB,EAAEC,OAAOH,QAAQI,KAAM,GAAIC,MAAO,CAAEC,MAAO,WAG7F,uBAAKR,UAAU,iCACb,0BAAQS,QA7BK,SAACL,GACpBnB,GAAQ,SAACyB,GAAD,wBAAiBA,EAAUxB,EAAYR,QA4BVsB,UAAU,6BAAzC,YACA,0BAAQS,QAASZ,EAAWG,UAAU,+BAAtC,cACA,0BAAQS,QA3BA,WACd,IAAME,EAAazB,EAAYR,GAC3BM,EAAKJ,KACP+B,EAAW/B,GAAKI,EAAKJ,KAGvBgC,EAAAA,EAAAA,IAAWD,GAAYE,MAAK,YAAc,EAAX7B,KAC7Ba,QAoB8BG,UAAU,gCAApC,gBAEF,uBAAKA,UAAU,SAAf,KACA,gBAAC,IAAD,CAAac,OAAQC,EAAAA,GAAQC,UAAWhC","sources":["webpack://pla-s-tools/./src/pages/form.js"],"sourcesContent":["import * as React from 'react';\nimport { graphql, useStaticQuery } from \"gatsby\";\nimport AddressCard from \"../component/address-card\";\nimport { createItem, SENDER, setApiUrl } from \"../helpers\";\n\nconst FormPage = () => {\n\n  // const apiData = useStaticQuery(graphql`\n  //   query MyQuery {\n  //     api {\n  //       appScriptUrl\n  //     }\n  //   }\n  // `);\n\n  // setApiUrl(apiData.api.appScriptUrl);\n\n  const [text, setText] = React.useState('');\n  const [data, setData] = React.useState({ id: null, name: '', address: '', note: '' });\n\n  const parseAsData = (text) => {\n    // remove all emojis\n    let temp = text;\n    temp = temp.replace(/(\\u00a9|\\u00ae|[\\u2000-\\u3300]|\\ud83c[\\ud000-\\udfff]|\\ud83d[\\ud000-\\udfff]|\\ud83e[\\ud000-\\udfff])/m, '');\n    // remove ผู้รับ\n    temp = temp.replace(/^([0-9\\.]+)?\\s?.*ผู้รับ/m, '');\n\n    // remove all spaces and new lines\n    temp = temp.split(/\\n+/m).filter(v => v.length > 1).join('\\n');\n    const temp_list = temp.split(/\\n+/m);\n    const name = temp_list.shift();\n    const note = temp_list.pop();\n    const address = temp_list.join('\\n').replace(/\\.\\s+/mg, '.');\n    return { name, address, note };\n  };\n\n  const resetData = () => {\n    setText(\"\");\n    setData({ id: null, name: '', address: '', note: '' });\n  };\n\n  const updateSample = (e) => {\n    setData((state) => ({ ...state, ...parseAsData(text) }));\n  };\n\n  const addData = () => {\n    const recentData = parseAsData(text);\n    if (data.id) {\n      recentData.id = data.id;\n    }\n    // console.log(recentData);\n    createItem(recentData).then(({ data }) => {\n      resetData();\n    });\n  };\n\n  React.useEffect(() => {\n    console.log(data);\n  }, [data]);\n  return (\n    <div>\n      <div className=\"d-flex justify-content-center my-3\">\n        <a href=\"../listing\" className=\"btn btn-primary\">รายการทั้งหมด</a>\n      </div>\n      <div className=\"print-page\">\n        <div>\n          <textarea value={text} onChange={(e) => setText(e.target.value)} rows={10} style={{ width: \"100%\" }}>\n          </textarea>\n        </div>\n        <div className=\"d-flex justify-content-center\">\n          <button onClick={updateSample} className=\"btn btn-outline-info me-3\">ตัวอย่าง</button>\n          <button onClick={resetData} className=\"btn btn-outline-danger me-3\">ล้างข้อมูล</button>\n          <button onClick={addData} className=\"btn btn-outline-primary me-3\">เพิ่มข้อมูล</button>\n        </div>\n        <div className=\"space\">&nbsp;</div>\n        <AddressCard sender={SENDER} recipient={data} />\n      </div>\n    </div>\n  );\n};\n\nexport default FormPage;"],"names":["React","text","setText","id","name","address","note","data","setData","parseAsData","temp","temp_list","replace","split","filter","v","length","join","shift","pop","resetData","console","log","className","href","value","onChange","e","target","rows","style","width","onClick","state","recentData","createItem","then","sender","SENDER","recipient"],"sourceRoot":""}